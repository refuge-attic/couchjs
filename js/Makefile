JS_FILE= ../main.js

JS_FILE_COMPONENTS= json2.js \
					filter.js \
					mimeparse.js \
					render.js \
					state.js \
					util.js \
					validate.js \
					views.js

JS_FILE_COMPONENTS_LAST = loop.js    

COFFEE_FILE= ../main-coffee.js

COFFEE_FILE_COMPONENTS_LAST = coffee-script.js \
							  loop.js

all: $(JS_FILE) $(COFFEE_FILE)

$(JS_FILE):
	@mkdir -p `dirname $(JS_FILE)`
	@echo "// DO NOT EDIT THIS FILE BY HAND" > $@
	@echo >> $@
	@cat $(JS_FILE_COMPONENTS) $(JS_FILE_COMPONENTS_LAST) >> $@

$(COFFEE_FILE): $(JS_FILE_COMPONENTS) $(COFFEE_FILE_COMPONENTS_LAST)
	mkdir -p `dirname $(COFFEE_FILE)`
	echo "// DO NOT EDIT THIS FILE BY HAND" > $@
	echo >> $@
	cat $(JS_FILE_COMPONENTS) $(COFFEE_FILE_COMPONENTS_LAST) >> $@

clean:
	@rm -f $(JS_FILE)
	@rm -f $(COFFEE_FILE)
